---
import { site, plans } from '../config/site';
---

<section id="planes" class="relative py-16 md:py-24">
  <div class="pointer-events-none absolute inset-0 -z-10">
    <div class="absolute left-10 top-10 h-72 w-72 rounded-full bg-rose-600/12 blur-3xl"></div>
    <div class="absolute right-8 bottom-8 h-72 w-72 rounded-full bg-amber-500/10 blur-3xl"></div>
  </div>
  <div class="container-main surface-panel px-4 py-10 md:px-8 md:py-12">
    <!-- Encabezado -->
    <div class="mx-auto max-w-2xl text-center">
      <span class="text-xs font-bold uppercase tracking-[0.2em] text-rose-400">Planes</span>
      <h2 class="mt-3 font-display text-3xl font-bold text-white md:text-4xl lg:text-5xl">
        Elige el plan que más te convenga
      </h2>
      <p class="mt-4 text-base text-zinc-100">
        Todos los planes incluyen las mismas características premium. Solo cambia el tiempo y el ahorro.
      </p>
    </div>

    <div class="line-accent mx-auto mt-8 w-24"></div>

    <!-- Grid de planes -->
    <div class="plans-grid mt-12 grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
      {plans.map((plan) => (
        <article class:list={[
          'plan-card group relative isolate flex flex-col overflow-hidden rounded-2xl border p-6 transition-all duration-300',
          plan.popular && 'plan-card--default',
        ]}>
          {plan.popular && (
            <span class="mb-2 inline-flex w-fit items-center rounded-full border border-amber-200/50 bg-amber-400/20 px-3 py-1 text-[10px] font-bold uppercase tracking-[0.18em] text-amber-100">
              Recomendado
            </span>
          )}

          <!-- Tag -->
          {plan.tag && (
            <span class:list={[
              'absolute -right-8 top-5 rotate-45 px-10 py-1 text-[10px] font-bold uppercase tracking-widest',
              plan.popular ? 'bg-amber-500 text-dark-950' : 'bg-amber-500 text-dark-950',
            ]}>
              {plan.tag}
            </span>
          )}

          <!-- Bonus -->
          {plan.bonus && (
            <span class="mb-3 inline-block w-fit rounded-full bg-amber-500/15 px-3 py-1 text-xs font-bold text-amber-300">
              {plan.bonus}
            </span>
          )}

          <!-- Nombre y precio -->
          <h3 class="font-display text-lg font-bold text-white">{plan.name}</h3>
          <div class="mt-3 flex items-baseline gap-1">
            <span class="font-display text-4xl font-bold text-white">${plan.price}</span>
            <span class="text-sm text-zinc-200/95">USD</span>
          </div>
          <p class="mt-1 text-xs text-zinc-200/90">Pago único · {plan.duration}</p>

          <!-- Separador -->
          <div class="my-5 h-px w-full bg-white/6"></div>

          <!-- Features -->
          <ul class="flex-1 space-y-2.5">
            {plan.features.map((feature) => (
              <li class="flex items-start gap-2 text-sm text-zinc-100">
                <svg class="mt-0.5 h-4 w-4 shrink-0 text-rose-400" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><path d="M5 13l4 4L19 7"/></svg>
                {feature}
              </li>
            ))}
          </ul>

          <!-- CTA -->
          <a
            href={`${site.whatsappLink}?text=${encodeURIComponent(plan.whatsappMsg)}`}
            data-cta-track={`planes_${plan.id}_click`}
            data-cta-section="planes"
            class="plan-cta mt-6 block rounded-full py-3 text-center text-sm font-bold transition-all duration-300"
            target="_blank"
            rel="noopener noreferrer"
          >
            {plan.cta}
          </a>
        </article>
      ))}
    </div>

    <!-- Nota al pie -->
    <div class="mt-8 text-center">
      <p class="text-sm text-zinc-200/90">
        Todos los precios en USD. Sin costos ocultos. Sin renovación automática.
      </p>
      <a
        href={`${site.whatsappLink}?text=${encodeURIComponent('Hola, tengo una duda sobre los planes de Flujo TV')}`}
        class="mt-3 inline-flex items-center gap-1.5 text-sm font-medium text-rose-400 transition-colors hover:text-rose-300"
        target="_blank"
        rel="noopener noreferrer"
      >
        ¿No sabes cuál elegir? Escríbenos y te ayudamos
        <svg class="h-3.5 w-3.5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg>
      </a>
    </div>
  </div>
</section>

<style>
  .plan-card {
    border-color: rgba(255, 255, 255, 0.22);
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.14) 0%, rgba(15, 23, 42, 0.85) 100%);
    box-shadow: 0 10px 35px -28px rgba(15, 23, 42, 0.95);
  }

  .plan-card--default {
    border-color: rgba(252, 211, 77, 0.75);
    box-shadow: 0 24px 65px -34px rgba(245, 158, 11, 0.75);
    transform: translateY(-2px);
  }

  .plan-card:hover {
    border-color: rgba(251, 113, 133, 0.8);
    box-shadow: 0 28px 75px -34px rgba(225, 29, 72, 0.78);
    transform: translateY(-10px) scale(1.015);
  }

  .plans-grid:hover .plan-card--default:not(:hover) {
    border-color: rgba(255, 255, 255, 0.22);
    box-shadow: 0 10px 35px -28px rgba(15, 23, 42, 0.95);
    transform: translateY(0) scale(1);
  }

  .plan-cta {
    border: 1px solid rgba(255, 255, 255, 0.3);
    background: rgba(255, 255, 255, 0.12);
    color: #fff;
  }

  .plan-card--default .plan-cta {
    border-color: transparent;
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.95) 0%, rgba(251, 191, 36, 0.95) 100%);
    color: #111827;
  }

  .plan-card:hover .plan-cta {
    border-color: transparent;
    background: #e11d48;
    color: #fff;
    box-shadow: 0 14px 34px -20px rgba(225, 29, 72, 0.85);
  }

  .plans-grid:hover .plan-card--default:not(:hover) .plan-cta {
    border: 1px solid rgba(255, 255, 255, 0.3);
    background: rgba(255, 255, 255, 0.12);
    color: #fff;
    box-shadow: none;
  }
</style>
